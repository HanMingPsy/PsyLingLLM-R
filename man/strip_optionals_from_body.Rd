% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/register_build_input.R
\name{strip_optionals_from_body}
\alias{strip_optionals_from_body}
\title{Strip optional runtime parameters from a request body}
\usage{
strip_optionals_from_body(
  body,
  optional_keys = NULL,
  preserve_vendor_fields = TRUE,
  warn = TRUE
)
}
\arguments{
\item{body}{list. Raw Pass-1-like request body.}

\item{optional_keys}{character(). Explicit optional keys to remove first
(highest priority). If \code{NULL}, \code{default_optional_keys()} is used.}

\item{preserve_vendor_fields}{logical(1). If \code{TRUE}, keep fields that look
like vendor-specific extensions (e.g., names starting with \code{vendor_} or \code{x_}).}

\item{warn}{logical(1). If \code{TRUE}, emit a message summarizing removed keys.}
}
\value{
list. The cleaned body.
}
\description{
This function removes optional (runtime-tunable) parameters from a raw
request body to yield a clean, structural Pass-2 body. It first removes
fields listed in \code{optional_keys} (highest priority), then applies a
heuristic to detect and drop non-standard but optional-like fields
(e.g., vendor variants of temperature/top_p/max_tokens etc.).
}
\details{
Core structural fields (e.g., \code{model}, \code{prompt}, \code{messages},
\code{"${PARAMETER}"}) are preserved. Optionally, vendor extension fields
(e.g., prefixed by \code{vendor_} or \code{x_}) can be preserved via
\code{preserve_vendor_fields = TRUE}.
}
