% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/trial_experiment.R
\name{trial_experiment}
\alias{trial_experiment}
\title{Run LLM Repeat-Trial Experiment (Multiple Conditions Supported)}
\usage{
trial_experiment(
  data,
  repeats = 1,
  random = TRUE,
  api_key,
  model,
  api_url,
  trial_prompt = "",
  role_mapping = list(user = "user", system = "system", assistant = "assistant"),
  system_prompt = "You are a participant in a psychology experiment.",
  max_tokens = 1024,
  temperature = 0.7,
  enable_thinking = TRUE,
  delay = 0,
  output_path = "experiment_results.csv"
)
}
\arguments{
\item{data}{data.frame containing columns: optionally \code{Run}, optionally \code{Item},
one or more \code{Condition*} columns, \code{Material}, optionally \code{TrialPrompt}.
Optional columns: \code{Target}, \code{CorrectResponse}, \code{TrialType}, \code{Metadata}.}

\item{repeats}{Integer. Number of repetitions per trial (default = 3).}

\item{random}{Logical. Whether to randomize trial order (default \code{TRUE}).}

\item{api_key}{Character. API key for the LLM.}

\item{model}{Character. Model name.}

\item{api_url}{Character. API endpoint URL.}

\item{role_mapping}{List. Role mapping, default: \code{list(user="user", system="system", assistant="assistant")}.}

\item{system_prompt}{Character. System-level prompt for the model.
Default: "You are a participant in a psychology experiment."}

\item{max_tokens}{Integer. Maximum tokens to generate.}

\item{temperature}{Numeric. Temperature for sampling.}

\item{enable_thinking}{Logical. Whether to enable chain-of-thought reasoning (default \code{TRUE}).}

\item{delay}{Numeric. Delay in seconds between requests (default = 1).}

\item{output_path}{Character. Output file path (CSV or XLSX).}
}
\value{
A \code{data.frame} including \code{Response}, \code{Think}, \code{ModelName},
  \code{ResponseTime}, plus all original marker/condition columns in standard order.
}
\description{
Execute repeated trials using a large language model.
Each \code{Item Ã— Condition(s)} can be repeated multiple times,
trials are randomized across repetitions if \code{random=TRUE},
or sequential if \code{random=FALSE}. Results include responses and timing.
}
