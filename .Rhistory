)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
role_mapping_auto <- tryCatch(infer_role_mapping_from_body(body), error = function(e) NULL)
role_mapping_final <- role_mapping %||% role_mapping_auto %||%
tryCatch(std$diagnostics$role_mapping_inferred, error = function(e) NULL)
model_eff <- body$model %||% "unnamed-model"
L
L <- c(L, render_pass2_path_consistency_report(pass1_paths, pass2_paths))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
role_mapping_auto <- tryCatch(infer_role_mapping_from_body(body), error = function(e) NULL)
role_mapping_final <- role_mapping %||% role_mapping_auto %||%
tryCatch(std$diagnostics$role_mapping_inferred, error = function(e) NULL)
model_eff <- body$model %||% "unnamed-model"
model_eff
role_mapping_final
L
role_mapping_auto <- tryCatch(infer_role_mapping_from_body(body), error = function(e) NULL)
role_mapping_final
role_mapping_auto
error = function(e) NULL
analysis_for_registry <- list(
report = L,  # your assembled report lines (character vector)
pass1 = list(
details = res1,
input_raw = list(url = url, headers = headers, body = body),  # EXACT originals
input_effective = list(url = url, headers = headers_eff_p1, body = body_eff_p1),
ports = list(
respond_path        = ns_answer_path,       # from your scoring/selection
thinking_path       = ns_think_path,        # may be NULL
delta_path          = st_answer_path,       # may be NULL
thinking_delta_path = st_think_path         # may be NULL
),
default_system = default_system_prompt
),
pass2 = list(
# Pass-2 processed template we standardized (with ${PARAMETER}: {})
input_raw = list(url = url, headers = headers, body = std$body_p2),
# Effective inputs actually used for Pass-2 probe (placeholders substituted, defaults merged)
input_effective = list(url = url, headers = headers_p2_tmpl, body = body_p2_tmpl),
details = res2
)
)
do_register <- FALSE
do_register
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
Q
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
devtools::document()
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
trial_prompt <- "which is greater? just show me the number. Don't say other things."
test_data <- data.frame(
TrialPrompt = rep(trial_prompt, 2),
Material = c(
"9.11 and 9.8",
"0.33 and 0.1")
)
api_key <- "sk-556f441892b649e6894f1b9288bfcbc2"
model <- "deepseek-chat"
api_url <- "https://api.deepseek.com/chat/completions"
result <- trial_experiment(
data = test_data,
api_key = api_key,
model = model,
api_url = api_url,
random = FALSE,
optionals = list(max_tokens = 512),
stream = TRUE,
return_raw = TRUE
)
print(result$Response)
result$Streaming
rl <- "https://api.deepseek.com/chat/completions"
key <- "sk-556f441892b649e6894f1b9288bfcbc2"
headers <- list(
"Content-Type" = "application/json",
"Authorization"  = "Bearer ${API_KEY}"
)
body <- list(
model = "deepseek-chat",
messages = list(
list(role = "system", content = "You are a helpful assistant."),
list(role = "user", content = "${CONTENT}")
),
stream = FALSE
)
analysis <- llm_register(url = url, api_key = key, headers = headers, body = body, role_mapping = list(system = "system", user = "user", assistant = "assistant"), optional_defaults = list(stream = TRUE, max_tokens = 1024, temperature = 0.7))
trial_prompt <- "which is greater? just show me the number. Don't say other things."
test_data <- data.frame(
TrialPrompt = rep(trial_prompt, 2),
Material = c(
"9.11 and 9.8",
"0.33 and 0.1")
)
api_key <- "sk-556f441892b649e6894f1b9288bfcbc2"
model <- "deepseek-chat"
api_url <- "https://api.deepseek.com/chat/completions"
result <- trial_experiment(
data = test_data,
api_key = api_key,
model = model,
api_url = api_url,
random = FALSE,
optionals = list(max_tokens = 512),
stream = TRUE,
return_raw = TRUE
)
print(result$Response)
trial_prompt <- "which is greater? just show me the number. Don't say other things."
test_data <- data.frame(
TrialPrompt = rep(trial_prompt, 2),
Material = c(
"9.11 and 9.8",
"0.33 and 0.1")
)
api_key <- "sk-556f441892b649e6894f1b9288bfcbc2"
model <- "deepseek-chat"
api_url <- "https://api.deepseek.com/chat/completions"
result <- trial_experiment(
data = test_data,
api_key = api_key,
model = model,
api_url = api_url,
random = FALSE,
optionals = list(max_tokens = 512),
stream = TRUE,
return_raw = TRUE
)
print(result$Response)
api_key <- "sk-556f441892b649e6894f1b9288bfcbc2"
model <- "deepseek-chat"
api_url <- "https://api.deepseek.com/chat/completions"
result <- trial_experiment(
data = test_data,
api_key = api_key,
model = model,
api_url = api_url,
random = FALSE,
optionals = list(max_tokens = 512),
stream = FALSE,
return_raw = TRUE
)
print(result$Response)
